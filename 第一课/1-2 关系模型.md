# 1-2 关系模型



# 关系类型

## 一对多

一对多关系是关系数据库中两个表之间的一种关系，该关系中第一个表中的单个行可以与第二个表中的一个或多个行相关，但第二个表中的一个行只可以与第一个表中的一个行相关。



例如，一个班级表：

| ID   | 名称       | 班主任 |
| :--- | :--------- | :----- |
| 201  | 二年级一班 | 王老师 |
| 202  | 二年级二班 | 李老师 |



每一行对应着一个班级，而一个班级对应着多个学生，所以班级表和学生表的关系就是“一对多”：

| ID   | 姓名 | 班级ID | 性别 | 年龄 |
| :--- | :--- | -----: | ---: | ---: |
| 1    | 小明 |    201 |    M |    9 |
| 2    | 小红 |    202 |    F |    8 |
| 3    | 小军 |    202 |    M |    8 |
| 4    | 小白 |    201 |    F |    9 |



## 一对一

[关系数据库](https://baike.baidu.com/item/关系数据库)中第一个表中的单个行只可以与第二个表中的一个行相关，且第二个表中的一个行也只可以与第一个表中的一个行相关。

一个老师不能在多个班级里当班主任，班级表

| 班级编号 | 名称       | 班主任 |
| :------- | :--------- | :----- |
| 201      | 二年级一班 | A1     |
| 202      | 二年级二班 | A3     |
| 203      | 二年级三班 | A4     |



如果我们把班级表分拆得细一点，例如，单独创建一个教师表：

| ID   | 名称   | 年龄 |
| :--- | :----- | :--- |
| A1   | 王老师 | 26   |
| A2   | 张老师 | 39   |
| A3   | 李老师 | 32   |
| A4   | 赵老师 | 27   |



## 多对多

多对多关系是关系数据库中两个表之间的一种关系， 该关系中第一个表中的一个行可以与第二个表中的一个或多个行相关。第二个表中的一个行也可以与第一个表中的一个或多个行相关。 

### 课程

| cid  | cname |
| ---- | ----- |
| 1    | 语文  |
| 2    | 数学  |
| 3    | 英语  |



### 成绩表

| cid  | sid  | score |
| ---- | ---- | ----- |
| 1    | 1    | 90    |
| 1    | 2    | 80    |
| 1    | 3    | 90    |
| 2    | 1    | 70    |
| 2    | 2    | 60    |
| 2    | 3    | 80    |
| 3    | 1    | 80    |
| 3    | 2    | 80    |
| 3    | 3    | 80    |
| 4    | 1    | 50    |
| 4    | 2    | 30    |
| 4    | 3    | 20    |
| 5    | 1    | 76    |
| 5    | 2    | 87    |
| 6    | 1    | 31    |
| 6    | 3    | 34    |
| 7    | 2    | 89    |
| 7    | 3    | 98    |



# 关系存储

## 主键

表格中的唯一id

## 外键

存储其他表格的字段

如果[公共关键字](https://baike.baidu.com/item/公共关键字/1239575)在一个关系中是[主关键字](https://baike.baidu.com/item/主关键字/1239455)，那么这个公共关键字被称为另一个关系的外键。

由此可见，**外键表示了两个关系之间的[相关](https://baike.baidu.com/item/相关/9882881)联系。**

以另一个关系的外键作主关键字的表被称为主表，具有此外键的表被称为主表的从表。外键又称作[外关键字](https://baike.baidu.com/item/外关键字)。



## 索引

在某一个列上建立索引，会加快检索速度

O(N) 效率提升到 O(log(N))





# 参考

https://baike.baidu.com/item/%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E7%B3%BB

https://baike.baidu.com/item/%E4%B8%80%E5%AF%B9%E5%A4%9A%E5%85%B3%E7%B3%BB